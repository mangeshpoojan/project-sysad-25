{% extends "free_space_analytics.html" %}

{% block title %}System On Time{% endblock %}

{% block head_css %}
    <link rel="stylesheet" href="{{url_for('static', filename='css/system_time.css')}}">
{% endblock %}

{% block content %}
    <h2 style="text-align:center; padding-top:20px;">System Uptime Report</h2>
    <img src="{{ url_for('static', filename='images/uptime_hist.png') }}?v={{ timestamp }}"
         alt="Uptime Histogram"
         style="display: block; margin: 0 auto; max-width: 80%; height: auto; border: 1px solid #ddd; border-radius: 8px;">

    {% set colors = ["#22c55e", "#65a30d", "#eab308", "#f59e0b", "#f97316", "#dc2626"] %}
    <div style="max-width: 90%; margin: 30px auto;">
        <table style="width:100%; border-collapse: collapse; text-align: left; font-size: 14px;">
            <thead>
                <tr style="background: #f3f4f6; color: #111827;">
                    <td style="padding: 10px; border-bottom: 2px solid #e5e7eb;">Lab</td>
                    <td style="padding: 10px; border-bottom: 2px solid #e5e7eb;">Computer Number</td>
                    <td style="padding: 10px; border-bottom: 2px solid #e5e7eb;">Weeks</td>
                    <td style="padding: 10px; border-bottom: 2px solid #e5e7eb;">Days</td>
                    <td style="padding: 10px; border-bottom: 2px solid #e5e7eb;">Hours</td>
                </tr>
            </thead>
            <tbody>
                {% for row in sorted_uptime_rows %}
                    {% set weeks = row[2] %}
                    {% if weeks < 5 %}
                        {% set row_color = colors[0] %}
                    {% elif weeks < 10 %}
                        {% set row_color = colors[1] %}
                    {% elif weeks < 15 %}
                        {% set row_color = colors[2] %}
                    {% elif weeks < 20 %}
                        {% set row_color = colors[3] %}
                    {% elif weeks < 25 %}
                        {% set row_color = colors[4] %}
                    {% else %}
                        {% set row_color = colors[5] %}
                    {% endif %}
                <tr style="background-color: {{ row_color }}20; color: #0f172a;">
                    <td style="padding: 10px; border-bottom: 1px solid #e5e7eb;">{{ row[0] }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #e5e7eb;">{{ row[1] }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #e5e7eb;">{{ row[2] }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #e5e7eb;">{{ row[3] }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #e5e7eb;">{{ row[4] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
